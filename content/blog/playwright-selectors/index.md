+++
date = 2024-01-24
title = "Playwright é€‰æ‹©å™¨ç»ˆææŒ‡å—"
description = ""
authors = ["ä¹™é†‡"]
[taxonomies]
tags = ["playwrightè¿›é˜¶", "ç¿»è¯‘"]
[extra]
math = false
image = "banner.jpg"
+++

## å†™åœ¨å‰é¢

**ğŸ‘€ ä¹™é†‡æ¥è‡ª 2024 å¹´çš„è¯„è®ºã€‚è¿™ç¯‡æ–‡ç« ä¸æ˜¯ç‰¹åˆ«æ¨èï¼Œé‡Œé¢è®²äº†å¾ˆå¤š xpath å’Œ css é€‰æ‹©å™¨çš„é«˜çº§åº”ç”¨ï¼Œä¸è¿‡ xpath æ˜¯ playwright ä¸æ¨èä½¿ç”¨çš„æ–¹å¼ï¼Œcss åœ¨ playwright é‡Œçš„åœ°ä½ä¹Ÿä¸é«˜ï¼Œplaywright æœ€æ¨èçš„å®šä½å™¨å…¶å®æ˜¯[è¿™å‡ ä¸ª](https://playwright.dev/docs/locators#quick-guide)**

åœ¨ Playwright ä¸­,é€‰æ‹©å™¨æ˜¯ç”¨äºå®šä½å’Œäº¤äº’ç½‘é¡µå…ƒç´ çš„å­—ç¬¦ä¸²æ ‡è¯†ç¬¦ã€‚å®ƒä»¬å¯¹äºæ‰§è¡Œè¡¨å•å¡«å†™ã€ç½‘é¡µçˆ¬å–å’Œè‡ªåŠ¨åŒ–æµ‹è¯•ç­‰ä»»åŠ¡è‡³å…³é‡è¦ã€‚

Playwright æ˜¯ä¸€ä¸ªå¼€æºçš„è‡ªåŠ¨åŒ–åº“,ä¸“ä¸ºç«¯åˆ°ç«¯æµ‹è¯•ã€ç½‘é¡µçˆ¬å–å’Œ ui è‡ªåŠ¨åŒ–æµ‹è¯•è€Œè®¾è®¡ã€‚å®ƒæ”¯æŒæ— å¤´å’Œæœ‰å¤´æµè§ˆå™¨æ¨¡å¼,å¹¶é€šè¿‡å¿«é€Ÿæ˜“ç”¨çš„ API æä¾›å‡ºè‰²çš„æ€§èƒ½ã€‚

Playwright å…¼å®¹å¤šç§æµè§ˆå™¨,åŒ…æ‹¬ Chromeã€Microsoft Edge (ä½¿ç”¨ Chromium)ã€Safari (ä½¿ç”¨ WebKit) å’Œ Mozilla Firefoxã€‚Playwright æä¾›ä¸åŒç±»å‹çš„é€‰æ‹©å™¨,åŒ…æ‹¬ CSS é€‰æ‹©å™¨ã€XPath é€‰æ‹©å™¨å’Œæ–‡æœ¬é€‰æ‹©å™¨,æ¯ç§é€‰æ‹©å™¨éƒ½æœ‰å…¶ä¼˜åŠ¿å’Œé€‚ç”¨åœºæ™¯ã€‚

![å›¾ç‰‡ 1: playwright-meme](https://bugbug-homepage.s3.eu-central-1.amazonaws.com/playwright_meme_api_17fe7e4658.jpeg)

## **æ¦‚è¦**

- æœ¬æŒ‡å—æ¶µç›–äº†ä¸åŒç±»å‹çš„é€‰æ‹©å™¨,åŒ…æ‹¬ CSSã€XPath å’Œæ–‡æœ¬é€‰æ‹©å™¨,å¹¶è§£é‡Šäº†å®ƒä»¬çš„ç”¨æ³•å’Œä¼˜åŠ¿ã€‚
- è¿˜æä¾›äº†åˆ›å»ºå¯é å’Œå¯ç»´æŠ¤çš„è‡ªåŠ¨åŒ–è„šæœ¬çš„æœ€ä½³å®è·µã€‚

**å¦è¯·æŸ¥çœ‹:**

[15 å¤§æ— ä»£ç è‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·](https://bugbug.io/blog/software-testing/codeless-automation-testing-tools/)

[Testim æ›¿ä»£å“](https://bugbug.io/blog/test-automation-tools/testim-alternatives/)

[Cypress æ›¿ä»£å“](https://bugbug.io/blog/test-automation-tools/cypress-alternative/)

## Playwright å…¥é—¨

è¦å¼€å§‹ä½¿ç”¨ Playwright,ä½ éœ€è¦å®‰è£…å®ƒå¹¶è®¾ç½®ä¸€ä¸ªé¡¹ç›®ã€‚

**ä»¥ä¸‹æ˜¯æ­¥éª¤æŒ‡å—:**

1.  ä¸ºä½ çš„ Playwright é¡¹ç›®åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶å¤¹ã€‚
2.  åœ¨ç»ˆç«¯æˆ–å‘½ä»¤è¡Œç•Œé¢ä¸­æ‰“å¼€è¯¥æ–‡ä»¶å¤¹ã€‚
3.  è¿è¡Œå‘½ä»¤ `npm init -y` æ¥åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„ Node.js é¡¹ç›®ã€‚
4.  é€šè¿‡è¿è¡Œå‘½ä»¤ `npm install playwright` æ¥å®‰è£… Playwrightã€‚
5.  å¯¼å…¥ Playwright å¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„æµè§ˆå™¨å®ä¾‹ã€‚

```javascript
const { chromium } = require("playwright");

(async () => {
  const browser = await chromium.launch();
  const page = await browser.newPage();
  // your code here
  await browser.close();
})();
```

å®‰è£…å¥½ Playwright å,ä½ å°±å¯ä»¥å¼€å§‹ä½¿ç”¨é€‰æ‹©å™¨ä¸ç½‘é¡µå…ƒç´ è¿›è¡Œäº¤äº’äº†ã€‚å¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äºä½¿ç”¨ Playwright çš„ä¿¡æ¯,å¯ä»¥æŸ¥çœ‹æˆ‘ä»¬çš„ [Playwright é€ŸæŸ¥è¡¨](https://bugbug.io/blog/software-testing/playwright-cheat-sheet/)ã€‚

## Playwright ä¸­çš„å®šä½å™¨ API

Playwright çš„å®šä½å™¨ API æ˜¯è‡ªåŠ¨ç­‰å¾…å’Œé‡è¯•åŠŸèƒ½çš„æ ¸å¿ƒ,ä½¿å¾—ä¸ç½‘é¡µå…ƒç´ çš„äº¤äº’æ›´åŠ ç¨³å®šã€‚ä»¥ä¸‹æ˜¯å…³äºå®ƒçš„ä¸€äº›è¦ç‚¹:

1.  **åˆ›å»ºå®šä½å™¨**: å®šä½å™¨ä½¿ç”¨ `page.locator()` æ–¹æ³•åˆ›å»ºã€‚æ­¤æ–¹æ³•æ¥å—ä¸€ä¸ªæè¿°å¦‚ä½•åœ¨é¡µé¢ä¸­æŸ¥æ‰¾å…ƒç´ çš„é€‰æ‹©å™¨ã€‚Playwright æ”¯æŒ CSS å’Œ XPath é€‰æ‹©å™¨,å¦‚æœçœç•¥ `css=` æˆ– `xpath=` å‰ç¼€,å®ƒä¼šè‡ªåŠ¨æ£€æµ‹ã€‚
2.  **å¯æ“ä½œæ€§æ£€æŸ¥**: åœ¨æ‰§è¡Œæ“ä½œä¹‹å‰,Playwright ä¼šå¯¹å…ƒç´ è¿›è¡Œå¯æ“ä½œæ€§æ£€æŸ¥ã€‚è¿™åŒ…æ‹¬ç¡®ä¿å…ƒç´ æ˜¯å¯è§çš„ã€attached çš„å’Œç¨³å®šçš„ã€‚ä¾‹å¦‚,åœ¨ç‚¹å‡»ä¸€ä¸ªå…ƒç´ æ—¶,Playwright ä¼šç­‰å¾…å®ƒå˜ä¸ºå¯ç‚¹å‡»çŠ¶æ€ã€‚
3.  **å…·ä½“çš„æ“ä½œè¡Œä¸º**: åœ¨æ‰§è¡Œè¯¸å¦‚ `click` æˆ– `dblclick` ç­‰æ“ä½œæ—¶,ä½ å¯ä»¥æŒ‡å®šå„ç§é€‰é¡¹:

- `position`: ç›¸å¯¹äºå…ƒç´ å·¦ä¸Šè§’çš„ x å’Œ y åæ ‡ã€‚
- `timeout`: ç­‰å¾…æ“ä½œå®Œæˆçš„æœ€é•¿æ—¶é—´(ä»¥æ¯«ç§’ä¸ºå•ä½)ã€‚é»˜è®¤ä¸º 30 ç§’,ä½†ä½ å¯ä»¥ä¼ å…¥ 0 æ¥ç¦ç”¨è¶…æ—¶ã€‚
- `trial`: å½“è®¾ç½®ä¸º true æ—¶,è¯¥æ–¹æ³•ä¼šæ‰§è¡Œå¯æ“ä½œæ€§æ£€æŸ¥è€Œä¸æ‰§è¡Œå®é™…çš„æ“ä½œã€‚è¿™å¯¹äºç¡®ä¿å…ƒç´ å·²å‡†å¤‡å¥½è¿›è¡Œäº¤äº’å¾ˆæœ‰ç”¨ã€‚

4.  **ç‚¹å‡»å’ŒåŒå‡»**: `click` æ–¹æ³•ç”¨äºç‚¹å‡»å…ƒç´ ,ä½ å¯ä»¥æŒ‡å®šé¼ æ ‡æŒ‰é’®ã€ç‚¹å‡»æ¬¡æ•°ã€é¼ æ ‡æŒ‰ä¸‹å’Œé‡Šæ”¾ä¹‹é—´çš„å»¶è¿Ÿ,ä»¥åŠä¿®é¥°é”®(å¦‚ Shiftã€Control)ç­‰é€‰é¡¹ã€‚`dblclick` æ–¹æ³•ç±»ä¼¼,ä½†æ‰§è¡ŒåŒå‡»æ“ä½œã€‚
5.  **å…ƒç´ æ•°é‡**: `count` æ–¹æ³•è¿”å›åŒ¹é…ç»™å®šé€‰æ‹©å™¨çš„å…ƒç´ æ•°é‡,æœ‰åŠ©äºæ–­è¨€æ£€æŸ¥é¡µé¢ä¸Šç‰¹å®šå…ƒç´ çš„æ•°é‡ã€‚
6.  **é€šè¿‡ textã€Alt text titile ä»¥åŠ testID å®šä½**: ä½ ä»¥æ ¹æ®å…ƒç´ çš„æ–‡æœ¬å†…å®¹ã€alt æ–‡æœ¬ã€title å±æ€§æˆ– textID æ¥å®šä½å…ƒç´ ã€‚è¿™å¯¹äºæŸ¥æ‰¾éäº¤äº’å…ƒç´ (å¦‚ `div`ã€`span`ã€`p` ç­‰)ä»¥åŠå…·æœ‰ç‰¹å®šæ ‡é¢˜æˆ– textID çš„å›¾åƒå’Œå…ƒç´ ç‰¹åˆ«æœ‰ç”¨ã€‚
7.  **Shadow DOM**: Playwright ä¸­çš„å®šä½å™¨é»˜è®¤å¯ä»¥ä¸ Shadow DOM ä¸­çš„å…ƒç´ ä¸€èµ·å·¥ä½œ,ä½† XPath é€‰æ‹©å™¨ ä¸æ”¯æŒè¿™ä¸ªç‰¹æ€§ã€‚
8.  **filter**: ä½ å¯ä»¥é€šè¿‡æ–‡æœ¬ã€å­å…ƒç´ æ˜¯å¦å­˜åœ¨æˆ–å…¶ä»–æ¡ä»¶æ¥è¿‡æ»¤å®šä½å™¨ã€‚å½“ä½ éœ€è¦ä»åˆ—è¡¨æˆ–ä¸€ç»„å…ƒç´ ä¸­é€‰æ‹©ç‰¹å®šé¡¹ç›®æ—¶,è¿™å¾ˆæœ‰ç”¨ã€‚

Playwright ä¸­çš„å®šä½å™¨ API æ—¨åœ¨å°½å¯èƒ½æ¨¡ä»¿ç”¨æˆ·äº¤äº’,ä½¿å…¶æˆä¸ºç¼–å†™å¯é å’Œå¯ç»´æŠ¤æµ‹è¯•ç”¨ä¾‹çš„å¼ºå¤§å·¥å…·ã€‚å¦‚éœ€æ›´è¯¦ç»†çš„ä¿¡æ¯,ä½ å¯ä»¥å‚è€ƒ Playwright å®˜æ–¹æ–‡æ¡£ä¸­å…³äº[å®šä½å™¨](https://playwright.dev/docs/locators)å’Œå®šä½å™¨æ–¹æ³•çš„éƒ¨åˆ†ã€‚

## Playwright CSS é€‰æ‹©å™¨

**CSS é€‰æ‹©å™¨**æ˜¯ Web å¼€å‘ä¸­çš„ä¸€ä¸ªä¸»è¦å·¥å…·,åœ¨ Playwright ä¸­å¹¿æ³›ç”¨äºå®šä½ç½‘é¡µä¸­çš„å…ƒç´ ã€‚è¿™äº›é€‰æ‹©å™¨æ˜¯ä»£è¡¨ä¸åŒå…ƒç´ çš„å­—ç¬¦ä¸²,åŸºäºå…ƒç´ çš„å±æ€§ã€class æˆ– IDã€‚

**Playwright CSS é€‰æ‹©å™¨**ä¸å¸¸è§„ CSS ä¸­çš„é€‰æ‹©å™¨ç±»ä¼¼,ä½†ä¸º Web è‡ªåŠ¨åŒ–è¿›è¡Œäº†å¢å¼º,å…è®¸ç²¾ç¡®å®šä½å…ƒç´ ã€‚å®ƒä»¬èƒ½å¤ŸåŒ¹é…åŒ…å«æŒ‡å®šå±æ€§æˆ–ç±»çš„ä»»ä½•å…ƒç´ ,å…¶è¯­æ³•ä¸ä¼ ç»Ÿ CSS éå¸¸ç›¸ä¼¼ã€‚è¿™åŒ…æ‹¬å¤æ‚çš„é€‰æ‹©å™¨,å¦‚ä¼ªç±»,å®ƒä»¬æ˜¯ Playwright ä¸­çš„å®éªŒæ€§ CSS åŠŸèƒ½ã€‚

æ­¤å¤–,Playwright æ”¯æŒå±æ€§é€‰æ‹©å™¨æ“ä½œç¬¦,å¹¶å¯ä»¥è§£æå°†å¤šä¸ªç©ºæ ¼è½¬æ¢ä¸ºä¸€ä¸ªç©ºæ ¼çš„è¡Œä¸º,ç¡®ä¿ç©ºæ ¼å§‹ç»ˆè¢«æ ‡å‡†åŒ–ã€‚

1.  **åŸºæœ¬ CSS é€‰æ‹©å™¨ç”¨æ³•**:

- Playwright å¯ä»¥ä½¿ç”¨æ ‡å‡† CSS è¯­æ³•å®šä½å…ƒç´ ã€‚

  `await page.locator('css=button').click();`

2.  **ç©¿é€ Shadow DOM**:

- Playwright ä¸­çš„ CSS é€‰æ‹©å™¨å¯ä»¥ç©¿é€å¼€æ”¾çš„ Shadow DOM,å…è®¸è®¿é—® shadow dom å…ƒç´ ã€‚

3.  **è‡ªå®šä¹‰ä¼ªç±»**:

- Playwright å¼•å…¥äº† `:visible`ã€`:has-text()`ã€`:has()`ã€`:is()`ã€`:nth-match()` ç­‰ä¼ªç±»ã€‚
- `:visible` åªé’ˆå¯¹å¯è§å…ƒç´ ã€‚

`await page.locator('button:visible').click();`

- `:has-text()` åŒ¹é…åŒ…å«æŒ‡å®šæ–‡æœ¬çš„å…ƒç´ ,å¯¹äºä¸åŒºåˆ†å¤§å°å†™ã€å»é™¤ç©ºæ ¼çš„å­å­—ç¬¦ä¸²åŒ¹é…å¾ˆæœ‰ç”¨ã€‚

  `await page.locator('article:has-text("Playwright")').click();`

4.  **é€šè¿‡æ–‡æœ¬åŒ¹é…**:

- `:text()` ä¼ªç±»åŒ¹é…åŒ…å«æŒ‡å®šæ–‡æœ¬çš„å…ƒç´ ã€‚

  `await page.locator('#nav-bar :text("Home")').click();`

- `:text-is()` åŒ¹é…å…·æœ‰å®Œå…¨ç›¸åŒæ–‡æœ¬çš„å…ƒç´ ã€‚

  `await page.locator('#nav-bar :text-is("Home")').click();`

- `:text-matches()` åŒ¹é…æ–‡æœ¬å†…å®¹ç¬¦åˆç±»ä¼¼ JavaScript æ­£åˆ™è¡¨è¾¾å¼çš„å…ƒç´ ã€‚

  `await page.locator('#nav-bar :text-matches("reg?ex", "i")').click();`

5.  **åŒ…å«å…¶ä»–å…ƒç´ çš„å…ƒç´ **:

- `:has()` ä¼ªç±»æ˜¯ Playwright ä¸­çš„å®éªŒæ€§ CSS åŠŸèƒ½ã€‚å¦‚æœå…ƒç´ åŒ…å«ç”±é€‰æ‹©å™¨æŒ‡å®šçš„å…¶ä»–å…ƒç´ ,å®ƒä¼šè¿”å›è¯¥å…ƒç´ ã€‚

  `await page.locator('article:has(div.promo)').textContent();`

6.  **åŸºäºå¸ƒå±€åŒ¹é…å…ƒç´ **:

- Playwright çš„å¸ƒå±€ä¼ªç±»å¦‚ `:right-of()`ã€`:left-of()`ã€`:above()`ã€`:below()` å’Œ `:near()` å¯ç”¨äºæ ¹æ®å…ƒç´ ä¸å…¶ä»–å…ƒç´ çš„ç©ºé—´å…³ç³»é€‰æ‹©å…ƒç´ ã€‚

`await page.locator('input:right-of(:text("Password"))').fill('value');`

7.  **ä»æŸ¥è¯¢ç»“æœä¸­é€‰æ‹©ç¬¬ N ä¸ªåŒ¹é…é¡¹**:

- `:nth-match()` ä¼ªç±»ä»å¤šä¸ªåŒ¹é…é¡¹ä¸­é€‰æ‹©ç‰¹å®šå®ä¾‹çš„å…ƒç´ ã€‚

`await page.locator(':nth-match(:text("Buy"), 3)').click();`

è¿™äº›åŠŸèƒ½ä½¿ Playwright ä¸­çš„ CSS é€‰æ‹©å™¨æˆä¸º Web è‡ªåŠ¨åŒ–çš„å¼ºå¤§å·¥å…·,ä¸ä»…å…è®¸åŸºäºå…ƒç´ çš„å±æ€§å’Œæ–‡æœ¬å†…å®¹ç²¾ç¡®å®šä½å…ƒç´ ,è¿˜å¯ä»¥æ ¹æ®å®ƒä»¬çš„å¯è§æ€§ã€åŒ…å«å…³ç³»å’Œç›¸å¯¹ä½ç½®è¿›è¡Œå®šä½ã€‚

è¿™ç§å¤šæ ·æ€§åœ¨å¤æ‚çš„ Web åº”ç”¨ç¨‹åºä¸­ç‰¹åˆ«æœ‰ç”¨,å› ä¸ºæ ‡å‡†é€‰æ‹©å™¨åŠŸèƒ½æœ‰é™ï¼Œæ‰©å±•ä¹‹åæ‰æ›´å¥½ç”¨ä¸€ç‚¹ã€‚

## Playwright ä¸­çš„ XPath é€‰æ‹©å™¨

**XPath é€‰æ‹©å™¨**ä¸º Playwright ä¸­çš„å…ƒç´ å®šä½æä¾›äº†å¦ä¸€ç§å¼ºå¤§çš„æ–¹æ³•ã€‚ä¸ CSS é€‰æ‹©å™¨ä¸åŒ,XPath é€‰æ‹©å™¨åŸºäºç½‘é¡µçš„ dom ç»“æ„ã€‚å®ƒä»¬å…è®¸ä½ æ ¹æ®å…ƒç´ çš„ä½ç½®ã€å±æ€§å’Œå…¶ä»–æ¡ä»¶æ¥æŸ¥æ‰¾å…ƒç´ ,xpath å¯ä»¥ç²¾ç¡®åœ°éå† DOMã€‚è¿™åœ¨ CSS é€‰æ‹©å™¨å¯èƒ½ä¸å¤Ÿç”¨çš„æƒ…å†µä¸‹ç‰¹åˆ«æœ‰ç”¨,æ¯”å¦‚å¤æ‚å¸ƒå±€æˆ–éœ€è¦æŸ¥æ‰¾åŒ…å«æŒ‡å®šæ–‡æœ¬çš„å…ƒç´ çš„æ—¶å€™ã€‚

**Playwright ä¸­çš„ XPath** è¿˜æ”¯æŒè‡ªå®šä¹‰é€‰æ‹©å™¨å¼•æ“,ä¸ºé€‰æ‹©å¾ˆéš¾é€šè¿‡ CSS å»å®šä½çš„å…ƒç´ æä¾›äº†çµæ´»æ€§ã€‚

ä½ å¯ä»¥ä½¿ç”¨ BugBug çš„**æ— ä»£ç ** [**åœ¨çº¿ XPath ç”Ÿæˆå™¨**](https://bugbug.io/xpath-selector-builder/)æ¥åˆ›å»ºç¨³å®šçš„ xpath é€‰æ‹©å™¨ã€‚

- **é€šè¿‡ XPath é€‰æ‹©å…ƒç´ **:

ä½ å¯ä»¥ä½¿ç”¨å…ƒç´ çš„ XPath æ¥é€‰æ‹©å…ƒç´ ,è¿™å…è®¸åŸºäº DOM ç»“æ„è¿›è¡Œæ›´çµæ´»å’Œç²¾ç¡®çš„å®šä½ã€‚

`const elementByXPath = await page.$x('//div[@class="example"]');`

- **è¯„ä¼° XPath è¡¨è¾¾å¼**:

Playwright å¯ä»¥è§£æ XPath è¡¨è¾¾å¼å¹¶è¿”å›åŒ¹é…çš„å…ƒç´ ã€‚$x æ˜¯ Playwright ä¸ºæ­¤ç›®çš„æä¾›çš„ä¸€ç§ç®€å†™æ–¹æ³•ã€‚

`const elements = await page.$x('//button[contains(text(), "Submit")]');`

- **åœ¨ XPath ä¸­ä½¿ç”¨ Axes**:

XPath çš„ Axes æ–¹æ³•å¯ä»¥ç”¨äºä»¥å„ç§æ–¹å¼éå† DOM,ä¾‹å¦‚é€‰æ‹©ç›¸å¯¹äºå½“å‰èŠ‚ç‚¹çš„çˆ¶å…ƒç´ ã€å…„å¼Ÿå…ƒç´ æˆ–å­å…ƒç´ ã€‚

`const siblingElement = await page.$x('//input[@id="username]/following-sibling::input');`

- **å¸¦æ¡ä»¶è¡¨è¾¾å¼çš„ XPath**:

XPath é€‰æ‹©å™¨å¯ä»¥åŒ…å«æ¡ä»¶æ¥åŒ¹é…å…·æœ‰ç‰¹å®šå±æ€§æˆ–æ–‡æœ¬å†…å®¹çš„å…ƒç´ ã€‚

`const elementWithCondition = await page.$x('//div[@data-status="active" and text()="Active"]');`

- **é€‰æ‹© Shadow DOM å†…çš„å…ƒç´ **:

è™½ç„¶ XPath æœ¬èº«ä¸æ”¯æŒ Shadow DOM,ä½† Playwright å…è®¸ä½¿ç”¨ CSS å’Œ XPath é€‰æ‹©å™¨çš„ç»„åˆæ¥å®ç°å®šä½ shadow dom ä¸­çš„å…ƒç´ ã€‚

å¦å¤–è¯·æŸ¥çœ‹æˆ‘ä»¬çš„æ¯”è¾ƒ: [XPath vs CSS é€‰æ‹©å™¨](https://bugbug.io/blog/test-automation/xpath-vs-css-selectors/)

## Playwright ä¸­çš„ text é€‰æ‹©å™¨

Playwright ä¸­çš„**text é€‰æ‹©å™¨**ä¸“æ³¨äºæ ¹æ®å¯è§æ–‡æœ¬å†…å®¹å®šä½å…ƒç´ ã€‚è¿™äº›é€‰æ‹©å™¨éå¸¸é€‚åˆå®šä½åŒ…å«ç‰¹å®šæ–‡æœ¬èŠ‚ç‚¹çš„å…ƒç´ ,æˆ–æœç´¢å…·æœ‰ç²¾ç¡®å†…å®¹çš„æ–‡æœ¬èŠ‚ç‚¹ã€‚

Playwright ä¸­æ–‡æœ¬é€‰æ‹©å™¨çš„**è¯­æ³•**éå¸¸ç›´è§‚,å…è®¸ä½ ç›´æ¥æŒ‡å®šè¦åŒ¹é…çš„æ–‡æœ¬,å¯ä»¥ç”¨å•å¼•å·æˆ–åŒå¼•å·è½¬ä¹‰ã€‚è¿™ä¸ªåŠŸèƒ½åœ¨ç½‘é¡µè‡ªåŠ¨åŒ–è„šæœ¬ä¸­ç‰¹åˆ«æœ‰ç”¨,å› ä¸ºé€šè¿‡æ–‡æœ¬å†…å®¹è¯†åˆ«å…ƒç´ æ¯”ä½¿ç”¨å±æ€§æˆ– XPath æ›´å®ç”¨ã€‚

## åœ¨ Playwright ä¸­ç»„åˆé€‰æ‹©å™¨

Playwright è¿˜æ”¯æŒå¤šä¸ªé€‰æ‹©å™¨çš„ç»„åˆ,è¿™ä¸ªåŠŸèƒ½å¢å¼ºäº†å…ƒç´ é€‰æ‹©çš„ç²¾ç¡®åº¦ã€‚é€šè¿‡å°†é€‰æ‹©å™¨é“¾æ¥åœ¨ä¸€èµ·,ä½ å¯ä»¥åˆ›å»ºæ›´å…·ä½“çš„æŸ¥è¯¢ã€‚è¿™å¯èƒ½æ¶‰åŠç»„åˆ CSS å’Œ XPath é€‰æ‹©å™¨,æˆ–ä½¿ç”¨åŒä¸€ç±»å‹çš„å¤šä¸ªé€‰æ‹©å™¨å¹¶å¢åŠ è¿‡æ»¤æ¡ä»¶æ¥ç²¾ç¡®å®šä½å…ƒç´ ã€‚

ä¾‹å¦‚,ä½ å¯ä»¥æ ¹æ®å…ƒç´ çš„å¸ƒå±€å’Œç›¸å¯¹äºå…¶ä»–å…ƒç´ çš„ä½ç½®æ¥é€‰æ‹©å…ƒç´ ,æˆ–è€…ç»“åˆå±æ€§é€‰æ‹©å™¨å’Œæ–‡æœ¬é€‰æ‹©å™¨æ¥æŸ¥æ‰¾åŒ…å«æŒ‡å®šæ–‡æœ¬çš„å…ƒç´ ã€‚é“¾å¼é€‰æ‹©å™¨è§£ææ»¡è¶³é“¾ä¸­æ‰€æœ‰æ¡ä»¶çš„å…ƒç´ ,ç»„åˆçš„æ–¹å¼å¯ä»¥éå¸¸çš„çµæ´»ã€‚

**å®šä½å™¨ API** åœ¨ Playwright ä¸­ç®€åŒ–äº†ä¸ç½‘é¡µå…ƒç´ äº¤äº’çš„è¿‡ç¨‹,æä¾›äº†ä¸€ç§æ›´ç¨³å®šå’Œå¼ºå¤§çš„æ–¹å¼æ¥æŸ¥è¯¢å’Œæ“ä½œé¡µé¢å…ƒç´ ã€‚è¿™åœ¨åŠ¨æ€é¡µé¢åº”ç”¨ä¸­,ä»¥åŠéœ€è¦å¤æ‚äº¤äº’çš„åœºæ™¯ä¸­ç‰¹åˆ«æœ‰ç”¨ã€‚

## Playwright ä¸­çš„é«˜çº§é€‰æ‹©å™¨

é™¤äº† CSS é€‰æ‹©å™¨å’Œ XPath é€‰æ‹©å™¨,Playwright è¿˜æ”¯æŒä¸€ç³»åˆ—é«˜çº§é€‰æ‹©å™¨,æä¾›æ›´å¤§çš„çµæ´»æ€§ã€‚è¿™äº›é«˜çº§é€‰æ‹©å™¨åŒ…æ‹¬ React é€‰æ‹©å™¨ã€å¯è®¿é—®æ€§é€‰æ‹©å™¨ã€CSS ä¼ªç±»å’Œ XPath å‡½æ•°ã€‚

**ä»¥ä¸‹æ˜¯ Playwright ä¸­ä¸€äº›é«˜çº§é€‰æ‹©å™¨çš„æ¦‚è¿°:**

- **React é€‰æ‹©å™¨**: ç”¨äºè¯†åˆ« React åº”ç”¨ç¨‹åºä¸­çš„å…ƒç´ ã€‚
- **å¯è®¿é—®æ€§é€‰æ‹©å™¨**: ç”¨äºæ ¹æ®å…ƒç´ çš„å¯è®¿é—®æ€§å±æ€§å®šä½å…ƒç´ ã€‚
- **CSS ä¼ªç±»**: ç”¨äºæ ¹æ®å„ç§çŠ¶æ€æˆ–æ¡ä»¶é€‰æ‹©å…ƒç´ ã€‚
- **XPath å‡½æ•°**: ç”¨äºä½¿ç”¨ XPath å‡½æ•°æ‰§è¡Œå¤æ‚æŸ¥è¯¢ã€‚

Playwright çš„é«˜çº§é€‰æ‹©å™¨å…è®¸ä½ å¾®è°ƒå…ƒç´ é€‰æ‹©å¹¶å¤„ç†æ›´å¤æ‚çš„åœºæ™¯ã€‚

## åœ¨ Playwright ä¸­ä½¿ç”¨é€‰æ‹©å™¨çš„æœ€ä½³å®è·µ

ä¸ºäº†å……åˆ†åˆ©ç”¨ Playwright é€‰æ‹©å™¨,éµå¾ªæœ€ä½³å®è·µå¾ˆé‡è¦ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›éœ€è¦è®°ä½çš„æç¤º:

- **ä½¿ç”¨å”¯ä¸€æ ‡è¯†ç¬¦**: å°½å¯èƒ½ä¾èµ–å”¯ä¸€æ ‡è¯†ç¬¦(å¦‚ ID æˆ–æ•°æ®å±æ€§)æ¥å®šä½å…ƒç´ ã€‚
- **é¿å…ä¸ç¨³å®šçš„é€‰æ‹©å™¨**: åº”é¿å…ä½¿ç”¨å®¹æ˜“å˜åŒ–çš„é€‰æ‹©å™¨,æ¯”å¦‚åŸºäºä½ç½®å…³ç³»çš„é€‰æ‹©å™¨ã€‚
- **å®šæœŸæ›´æ–°é€‰æ‹©å™¨**: å®šæœŸæ£€æŸ¥å¹¶æ›´æ–°ä½ çš„é€‰æ‹©å™¨,ä»¥é€‚åº”ç½‘ç«™ç»“æ„çš„ä»»ä½•å˜åŒ–ã€‚

é€šè¿‡éµå¾ªè¿™äº›æœ€ä½³å®è·µ,ä½ å¯ä»¥ç¡®ä¿è‡ªåŠ¨åŒ–è„šæœ¬çš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚

## åœ¨ Playwright ä¸­ä½¿ç”¨é€‰æ‹©å™¨è¿›è¡Œè‡ªåŠ¨åŒ–

Playwright é€‰æ‹©å™¨å¯¹äºè¡¨å•å¡«å†™ã€ç½‘é¡µçˆ¬è™«å’Œ ui è‡ªåŠ¨åŒ–æµ‹è¯•ç­‰ä»»åŠ¡éå¸¸æœ‰ä»·å€¼ã€‚è®©æˆ‘ä»¬æ¢è®¨å‡ ä¸ªåœ¨ Playwright ä¸­ä½¿ç”¨é€‰æ‹©å™¨è¿›è¡Œè‡ªåŠ¨åŒ–çš„ä¾‹å­:

### è¡¨å•å¡«å†™

è¿™ä¸ªè„šæœ¬æ¼”ç¤ºäº†æµè§ˆå™¨è‡ªåŠ¨åŒ–çš„åŸºæœ¬å¥—è·¯,ç‰¹åˆ«æ˜¯å¯åŠ¨æµè§ˆå™¨ã€è·³è½¬åˆ°é¡µé¢å’Œä¸ç½‘é¡µå…ƒç´ äº¤äº’ã€‚éœ€è¦æ³¨æ„çš„æ˜¯,è¿™ä¸ªè„šæœ¬å¹¶æ²¡æœ‰å¯¼èˆªåˆ°ç‰¹å®šçš„ URL,æ‰€ä»¥å¦‚æœä½ æ‰“ç®—å°†å®ƒç”¨äºç‰¹å®šç½‘ç«™,ä½ éœ€è¦æ·»åŠ ä¸€è¡Œä½¿ç”¨ `page.goto('è¢«æµ‹ç½‘ç«™ URL')` æ¥è®¿é—®è¯¥ç½‘ç«™ã€‚

```javascript
const { chromium } = require('playwright');

(async () => {
  const browser = await chromium.launch();
  const page = await browser.newPage();

  const usernameInput = await page.locator('#username');
  await usernameInput.fill('johndoe');

  const passwordInput = await page.locator('#password');
  await passwordInput.fill('password123');

  await browser.close();\
})();
```

### ç½‘é¡µçˆ¬è™«

ä¸‹é¢çš„ä»£ç å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ Playwright çš„è‡ªåŠ¨åŒ–åŠŸèƒ½æå–å’Œæ‰“å°ç½‘é¡µä¸Šæ‰€æœ‰é“¾æ¥ 'a' å…ƒç´ çš„æ–‡æœ¬å†…å®¹ã€‚

è„šæœ¬é¦–å…ˆä» Playwright å¯¼å…¥ Chromium æ¨¡å—,ç„¶åå¯åŠ¨ä¸€ä¸ª Chromium æµè§ˆå™¨å®ä¾‹å¹¶æ‰“å¼€ä¸€ä¸ªæ–°é¡µé¢ã€‚å®ƒä½¿ç”¨ `$$eval` å‡½æ•°é€‰æ‹©é¡µé¢ä¸Šçš„æ‰€æœ‰è¶…é“¾æ¥å…ƒç´ ,å¹¶å°†å®ƒä»¬çš„æ–‡æœ¬å†…å®¹æ˜ å°„åˆ°ä¸€ä¸ªæ•°ç»„ã€‚ç„¶åéå†è¿™ä¸ªæ•°ç»„,å°†æ¯ä¸ªé“¾æ¥çš„æ–‡æœ¬å†…å®¹æ‰“å°åˆ°æ§åˆ¶å°ã€‚

æœ€å,è„šæœ¬å…³é—­æµè§ˆå™¨é¡µé¢ã€‚

```javascript
const { chromium } = require("playwright");

(async () => {
  const browser = await chromium.launch();
  const page = await browser.newPage();

  const links = await page.$$eval("a", (links) =>
    links.map((link) => link.textContent)
  );

  for (const linkText of links) {
    console.log(linkText);
  }

  await page.close();
})();
```

### ui è‡ªåŠ¨åŒ–æµ‹è¯•

ä¸‹é¢çš„ä»£ç æ˜¯ä¸€ä¸ªä½¿ç”¨ Chromium æµè§ˆå™¨è¿›è¡Œç½‘é¡µç™»å½•çš„ Playwright è„šæœ¬ã€‚

è„šæœ¬é¦–å…ˆå¯¼å…¥ Playwright æ¨¡å—å¹¶å¯åŠ¨ Chromium æµè§ˆå™¨ã€‚ç„¶åå®ƒæ‰“å¼€ä¸€ä¸ªæ–°çš„æµè§ˆå™¨é¡µé¢ã€‚

æ¥ä¸‹æ¥,è„šæœ¬é€šè¿‡å„è‡ªçš„ ID `#username` å’Œ `#password` å®šä½é¡µé¢ä¸Šçš„ç”¨æˆ·åå’Œå¯†ç è¾“å…¥å­—æ®µ,å¹¶ç”¨é¢„å®šä¹‰çš„æ•°æ® 'johndoe' å’Œ 'password123' å¡«å……å®ƒä»¬ã€‚

å¡«å†™ç™»å½•ä¿¡æ¯å,è„šæœ¬å®šä½å¹¶ç‚¹å‡»ç™»å½•æŒ‰é’® `#loginButton`ã€‚ç„¶åå®ƒç­‰å¾…é€€å‡ºç™»å½•æŒ‰é’® `#logoutButton` å‡ºç°,æŠŠè¿™ä¸ªå½“æˆæ˜¯æˆåŠŸç™»å½•çš„æ–­è¨€ã€‚

æœ€å,è„šæœ¬å…³é—­æµè§ˆå™¨é¡µé¢ã€‚è¿™ä¸ªè‡ªåŠ¨åŒ–è„šæœ¬æ˜¯ Playwright å¦‚ä½•ç”¨äºè‡ªåŠ¨åŒ–ç½‘é¡µåº”ç”¨ç™»å½•ç¨‹åºçš„åŸºæœ¬ç¤ºä¾‹ã€‚

```javascript
const { chromium } = require('playwright');

(async () => {\
  const browser = await chromium.launch();
  const page = await browser.newPage();

  const usernameInput = await page.locator('#username');
  await usernameInput.fill('johndoe');

  const passwordInput = await page.locator('#password');
  await passwordInput.fill('password123');

  const loginButton = await page.locator('#loginButton');
  await loginButton.click();

  const logoutButton = await page.locator('#logoutButton');
  await expect(logoutButton).toBeVisible();

  await page.close();\
})();
```

## åœ¨ Playwright ä¸­ä½¿ç”¨é€‰æ‹©å™¨å¤„ç† Shadow DOM

Playwright çš„ CSS å’Œæ–‡æœ¬å¼•æ“å¯ä»¥ç©¿é€ Shadow DOM,å…è®¸ä½ ä¸å…ƒç´ äº¤äº’,å°±åƒ shadow dom ä¸å­˜åœ¨ä¸€æ ·ã€‚è¿™ç§èƒ½åŠ›ç®€åŒ–äº†åœ¨ Shadow DOM å†…é€‰æ‹©å’Œæ“ä½œå…ƒç´ çš„è¿‡ç¨‹ã€‚

å¯¹äºå®šä½ Shadow DOM ä¸­çš„å…ƒç´ ,å¯ä»¥ç›´æ¥ä½¿ç”¨ Playwright çš„æ ‡å‡†å®šä½å™¨,å¦‚ `page.locator()`ã€`page.getByText()` ç­‰ã€‚ä¾‹å¦‚,å¦‚æœä½ æœ‰ä¸€ä¸ªå¸¦æœ‰ shadow root çš„è‡ªå®šä¹‰ Web ç»„ä»¶,æƒ³è¦ç‚¹å‡»å…¶ä¸­çš„ç‰¹å®šå…ƒç´ ,ä½ å¯ä»¥ä½¿ç”¨ `page.getByText('Details').click()` æ¥å®šä½æ–‡æœ¬ä¸º 'Details' çš„å…ƒç´ ã€‚åŒæ ·,è¦ç‚¹å‡»åƒ `<x-details>` è¿™æ ·çš„è‡ªå®šä¹‰å…ƒç´ ,ä½ å¯ä»¥ä½¿ç”¨ `page.locator('x-details', { hasText: 'Details' }).click()`ã€‚

Playwright è¿˜æ”¯æŒé«˜çº§é€‰æ‹©å™¨ç­–ç•¥,æ¯”å¦‚é€šè¿‡æ–‡æœ¬ã€å­/åä»£å…ƒç´ è¿‡æ»¤å®šä½å™¨,æˆ–ä½¿ç”¨å¸ƒå±€ä¼ªç±»å¦‚ `:right-of()`ã€`:left-of()`ã€`:above()`ã€`:below()` å’Œ `:near()` æ¥æ ¹æ®å…ƒç´ ç›¸å¯¹äºå…¶ä»–å…ƒç´ çš„å¸ƒå±€å®šä½å…ƒç´ ã€‚å½“å…ƒç´ ç¼ºä¹æ˜æ˜¾çš„å±æ€§æˆ–æ–‡æœ¬å†…å®¹æ—¶,è¿™äº›ä¼ªç±»ç‰¹åˆ«æœ‰ç”¨,å…è®¸ä½ æŒ‡å®šå®ƒä»¬çš„ç›¸å¯¹ä½ç½®ä»¥è¿›è¡Œæ›´ç²¾ç¡®çš„é€‰æ‹©ã€‚

æ­¤å¤–,Playwright ä¸º React å’Œ Vue åº”ç”¨ç¨‹åºæä¾›äº†ä¸“é—¨çš„å®šä½å™¨,åˆ†åˆ«ä»¥ `_react` å’Œ `_vue` å‰ç¼€è¯†åˆ«ã€‚è¿™äº›å®šä½å™¨å…è®¸ä½ æ ¹æ®ç»„ä»¶åç§°å’Œå±æ€§å€¼æŸ¥æ‰¾å…ƒç´ ,è¿™åœ¨æµ‹è¯•è¿™äº›æ¡†æ¶çš„ç°ä»£ Web åº”ç”¨ç¨‹åºæ—¶ç‰¹åˆ«æ–¹ä¾¿ã€‚

é‡è¦çš„æ˜¯è¦æ³¨æ„,è™½ç„¶ XPath å¯ä»¥åœ¨ Playwright ä¸­ä½¿ç”¨,ä½†å®ƒä¸èƒ½ç©¿ shadow root,å¹¶ä¸”é€šå¸¸ä¸é¼“åŠ±ä½¿ç”¨,æˆ‘ä»¬è¿˜æ˜¯è¦ä½¿ç”¨æ›´ç¨³å®šã€å¯¹ç”¨æˆ·å¯è§çš„å®šä½å™¨ã€‚

## ç»“è®º

Playwright é€‰æ‹©å™¨æ˜¯è¿›è¡Œè‡ªåŠ¨åŒ–ç½‘é¡µæµ‹è¯•ã€ç½‘é¡µæŠ“å–å’Œç”¨æˆ·ç•Œé¢æµ‹è¯•ä»»åŠ¡çš„å¼ºå¤§å·¥å…·ã€‚é€šè¿‡åˆ©ç”¨ CSS é€‰æ‹©å™¨ã€XPath é€‰æ‹©å™¨å’Œæ–‡æœ¬é€‰æ‹©å™¨,ä½ å¯ä»¥ç²¾ç¡®å®šä½ç½‘é¡µä¸Šçš„å…ƒç´ å¹¶ä¸ä¹‹äº¤äº’ã€‚

é€šè¿‡éµå¾ªæœ€ä½³å®è·µå¹¶åˆ©ç”¨ Playwright é€‰æ‹©å™¨çš„é«˜çº§åŠŸèƒ½,ä½ å¯ä»¥ç®€åŒ–è‡ªåŠ¨åŒ–è„šæœ¬å¹¶æé«˜å…¶å¯é æ€§ã€‚ä»Šå¤©å°±å¼€å§‹ä½¿ç”¨ Playwright é€‰æ‹©å™¨,é‡Šæ”¾ä½ çš„è‡ªåŠ¨åŒ–å·¥ä½œçš„å…¨éƒ¨æ½œåŠ›ã€‚

è®°ä½è¦å®šæœŸæ›´æ–°ä½ çš„é€‰æ‹©å™¨,ä½¿ç”¨å”¯ä¸€æ ‡è¯†ç¬¦,å¹¶æ¢ç´¢ Playwright é€‰æ‹©å™¨å¼•æ“ä¸­çš„å„ç§é€‰é¡¹,ä»¥ä½¿ä½ çš„è‡ªåŠ¨åŒ–è„šæœ¬æ›´åŠ é«˜æ•ˆå’Œç¨³å¥ã€‚

**ç¥ä½ (è‡ªåŠ¨åŒ–)æµ‹è¯•æ„‰å¿«!**

## å¸¸è§é—®é¢˜è§£ç­”: Playwright é€‰æ‹©å™¨å’Œå®šä½å™¨

### Playwright æ”¯æŒå“ªäº›é€‰æ‹©å™¨?

Playwright æ”¯æŒå¤šç§é€‰æ‹©å™¨æ¥é€‰æ‹©å…ƒç´ ,ä»¥æ»¡è¶³ä¸åŒçš„ Web è‡ªåŠ¨åŒ–éœ€æ±‚ã€‚è¿™äº›åŒ…æ‹¬:

- CSS é€‰æ‹©å™¨: æ ¹æ® CSS å±æ€§å®šä½å…ƒç´ ã€‚Playwright çš„ CSS é€‰æ‹©å™¨å·¥ä½œæ–¹å¼ç±»ä¼¼äºå¸¸è§„ CSS,ä½†é’ˆå¯¹è‡ªåŠ¨åŒ–è¿›è¡Œäº†å¢å¼ºã€‚
- XPath é€‰æ‹©å™¨: é€‚ç”¨äºå¤æ‚çš„ DOM ç»“æ„,XPath é€‰æ‹©å™¨å¯ä»¥æ ¹æ®å…ƒç´ çš„ XML è·¯å¾„å¯¼èˆªå’ŒæŸ¥æ‰¾å…ƒç´ ã€‚
- æ–‡æœ¬é€‰æ‹©å™¨: å®šä½åŒ…å«æŒ‡å®šæ–‡æœ¬çš„å…ƒç´ ,éå¸¸é€‚åˆæŸ¥æ‰¾æ–‡æœ¬èŠ‚ç‚¹æˆ–å…·æœ‰ç²¾ç¡®æ–‡æœ¬å†…å®¹çš„å…ƒç´ ã€‚
- Playwright ç‰¹å®šé€‰æ‹©å™¨: è¿™åŒ…æ‹¬åƒ data-test-id è¿™æ ·çš„é€‰æ‹©å™¨,ç”¨äºä»¥ Playwright æ¡†æ¶ç‰¹å®šçš„æ–¹å¼å®šä½å…ƒç´ ã€‚
- React é€‰æ‹©å™¨: ä¸º React åº”ç”¨ç¨‹åºè®¾è®¡çš„é€‰æ‹©å™¨,å…è®¸ä¸ React ç»„ä»¶äº¤äº’ã€‚
- å±æ€§é€‰æ‹©å™¨: è¿™äº›é€‰æ‹©å™¨ä½¿ç”¨å±æ€§é€‰æ‹©å™¨æ“ä½œç¬¦,å¯ä»¥æ ¹æ®å±æ€§åŒ¹é…ä»»ä½•å…ƒç´ ã€‚
- é“¾å¼é€‰æ‹©å™¨: ç»„åˆå¤šä¸ªé€‰æ‹©å™¨,å¦‚ CSS å’Œ XPath,ä»¥è§£å†³æ›´å¤æ‚çš„é€‰æ‹©åœºæ™¯ã€‚
- å¸ƒå±€é€‰æ‹©å™¨: ä¾èµ–å…ƒç´ çš„å¸ƒå±€å’Œç›¸å¯¹ä½ç½®,ä½¿ç”¨è¯¸å¦‚è¾¹ç•Œå®¢æˆ·çŸ©å½¢ç­‰è¿›è¡Œè®¡ç®—ã€‚

### å¦‚ä½•åœ¨ Playwright ä¸­é€‰æ‹©å…ƒç´ ?

åœ¨ Playwright ä¸­é€‰æ‹©å…ƒç´ é€šå¸¸æ¶‰åŠä½¿ç”¨ä»£è¡¨ä¸Šè¿°é€‰æ‹©å™¨ä¹‹ä¸€çš„å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚:

- CSS é€‰æ‹©å™¨: `page.$('.className')` æ ¹æ®ç±»é€‰æ‹©å…ƒç´ ã€‚
- XPath é€‰æ‹©å™¨: `page.$x('//div')` ä½¿ç”¨ XPath è¯­æ³•æŸ¥æ‰¾å…ƒç´ ã€‚
- æ–‡æœ¬é€‰æ‹©å™¨: `page.$('text=Example')` æŸ¥æ‰¾åŒ…å«æŒ‡å®šæ–‡æœ¬çš„å…ƒç´ ã€‚
- ç»„åˆé€‰æ‹©å™¨: é“¾æ¥é€‰æ‹©å™¨å¦‚ `page.$('div.className > span')` ä»¥å®šä½ç‰¹å®šå…ƒç´ å†…çš„å…ƒç´ ã€‚

### ä»€ä¹ˆæ˜¯ Playwright å®šä½å™¨æˆ–é€‰æ‹©å™¨?

Playwright å®šä½å™¨æˆ–é€‰æ‹©å™¨æ˜¯ç”¨äºåœ¨ Web è‡ªåŠ¨åŒ–è„šæœ¬ä¸­é€‰æ‹©å…ƒç´ çš„åŸºäºå­—ç¬¦ä¸²çš„å·¥å…·ã€‚é€‰æ‹©å™¨æ˜¯ Playwright è¯†åˆ«è¦äº¤äº’çš„å…ƒç´ çš„æ–¹å¼,æ— è®ºæ˜¯ç‚¹å‡»ã€è¯»å–å†…å®¹è¿˜æ˜¯è¾“å…¥æ•°æ®ã€‚å®ƒä»¬å¯ä»¥å¾ˆç®€å•,æ¯”å¦‚æ–‡æœ¬é€‰æ‹©å™¨,ä¹Ÿå¯ä»¥å¾ˆå¤æ‚,æ¯”å¦‚é“¾æ¥ CSS å’Œ XPath çš„é“¾å¼é€‰æ‹©å™¨ã€‚

### æˆ‘ä»¬å¯ä»¥åœ¨ Playwright ä¸­ä½¿ç”¨ XPath å—?

æ˜¯çš„,XPath åœ¨ Playwright æ¡†æ¶ä¸­å¾—åˆ°å®Œå…¨æ”¯æŒã€‚å®ƒå¯ä»¥ç”¨äºæ‰§è¡Œç²¾ç¡®çš„å…ƒç´ é€‰æ‹©,ç‰¹åˆ«æ˜¯åœ¨ CSS é€‰æ‹©å™¨å¯èƒ½ä¸å¤Ÿç”¨çš„åœºæ™¯ä¸­ã€‚Playwright ä¸­çš„ XPath é€‰æ‹©å™¨å¯ä»¥ä½¿ç”¨å„ç§ Axesã€è°“è¯å’Œå‡½æ•°æ¥å¯¼èˆª DOM,å®šä½æ ¹æ®ç»“æ„å’Œå†…å®¹(åŒ…æ‹¬æ–‡æœ¬èŠ‚ç‚¹å’Œå±æ€§)å®šä½å…ƒç´ éå¸¸æœ‰ç”¨ã€‚ä¾‹å¦‚,`page.$x('//button[@id="submit"]')` å°†å®šä½ ID ä¸º "submit" çš„æŒ‰é’®ã€‚

## æ¥æº

URL æ¥æº: https://bugbug.io/blog/testing-frameworks/playwright-selectors/
